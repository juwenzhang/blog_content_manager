import{e as I}from"./el-input-DAmIQZQJ.js";import{f as q}from"./el-date-picker-CEJPa9WV.js";import"./el-col-DBOKvURt.js";import{E as F,a as M,b as Y}from"./index-2-aYBJsj.js";import{a as j,E as O}from"./index-Cka9We6Q.js";import{d as B,e as H,f as Q,u as W,E as G,a as J,b as K,c as X}from"./system-BwBj8k-r.js";import{d as U,m as g,L,a as E,o as z,A as e,w as a,S as V,W as h,_ as R,y as T,e as Z,f as ee,U as x,h as i}from"./index-BFfMGo-6.js";const le={class:"system-user-search"},te={class:"system-user-btn"},ae=U({__name:"user-search",emits:["queryClick","resetClick"],setup(S,{expose:y,emit:w}){const u=g(),t=L({username:"",phone:"",email:"",status:"启用",date:""}),r=w,b=()=>{var o;u.value&&((o=u.value)==null||o.resetFields(),r("resetClick"))},C=()=>{r("queryClick",t)};return y({searchForm:t}),(o,l)=>{const _=Y,d=M,f=O,k=H,D=B,p=Q,s=j,n=I,m=F;return z(),E("div",le,[e(m,{model:t,"label-width":"80px",ref_key:"formRef",ref:u,size:"large"},{default:a(()=>[e(s,{gutter:20},{default:a(()=>[e(f,{span:8},{default:a(()=>[e(d,{label:"用户名",prop:"username"},{default:a(()=>[e(_,{placeholder:"请输入用户名",size:"large",modelValue:t.username,"onUpdate:modelValue":l[0]||(l[0]=v=>t.username=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(d,{label:"手机号",prop:"phone"},{default:a(()=>[e(_,{placeholder:"请输入手机号",size:"large",modelValue:t.phone,"onUpdate:modelValue":l[1]||(l[1]=v=>t.phone=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(d,{label:"邮箱",prop:"email"},{default:a(()=>[e(_,{placeholder:"请输入邮箱",size:"large",modelValue:t.email,"onUpdate:modelValue":l[2]||(l[2]=v=>t.email=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(d,{label:"状态",prop:"status"},{default:a(()=>[e(D,{size:"large",placeholder:"请选择状态",modelValue:t.status,"onUpdate:modelValue":l[3]||(l[3]=v=>t.status=v)},{default:a(()=>[e(k,{label:"启用",value:"0"}),e(k,{label:"禁用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(d,{label:"日期",prop:"date"},{default:a(()=>[e(p,{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"-",format:"YYYY/MM/DD","value-format":"YYYY/MM/DD",style:{width:"100%"},size:"large",modelValue:t.date,"onUpdate:modelValue":l[4]||(l[4]=v=>t.date=v)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),V("div",te,[e(n,{type:"warning",size:"large",icon:"Refresh",onClick:b},{default:a(()=>l[5]||(l[5]=[h(" 重置 ")])),_:1}),e(n,{type:"primary",size:"large",icon:"Search",onClick:C},{default:a(()=>l[6]||(l[6]=[h(" 查询 ")])),_:1})])]),_:1},8,["model"])])}}}),oe=R(ae,[["__scopeId","data-v-6ea7c8e8"]]),se={class:"system-user-content"},ne={class:"system-user-header"},re={class:"system-user-table"},de={class:"system-user-pagination"},ue=U({__name:"user-content",emits:["showDialog","editData"],setup(S,{expose:y,emit:w}){const u=W(),t=g({}),r=g(0),b=g(()=>{}),C=g(()=>{}),o=g(1),l=g(10),_=w,d=async(p={})=>{const s=l.value,n=(o.value-1)*s,m={size:s,offset:n,searchForm:p};return await u.postUserListRequest("user",m)},f=()=>{_("showDialog")},k=async p=>{const s=await u.deleteUserByIdRequest(p);s&&(t.value=s)},D=p=>{_("editData",p)};return T(async()=>{var p;t.value=await d(),(p=t.value)!=null&&p.list&&(r.value=1/Object.keys(t.value.list[0]).length),b.value=async()=>{t.value=await d()},C.value=async()=>{t.value=await d()}}),y({fetchUserListRequest:d}),(p,s)=>{var N,$;const n=I,m=G,v=J,P=K;return z(),E("div",se,[V("div",ne,[s[3]||(s[3]=V("h2",{class:"system-user-title"},"用户列表",-1)),e(n,{type:"primary",size:"large",onClick:f},{default:a(()=>s[2]||(s[2]=[h("新建用户")])),_:1})]),V("div",re,[(N=t.value)!=null&&N.list?(z(),Z(v,{key:0,data:t.value.list,border:"",stripe:"",size:"large"},{default:a(()=>[e(m,{type:"selection",width:"55",align:"center"}),e(m,{type:"index",label:"序号",width:"75",align:"center"}),e(m,{prop:"name",label:"姓名",width:r.value,align:"center"},null,8,["width"]),e(m,{prop:"realName",label:"真实姓名",width:r.value,align:"center"},null,8,["width"]),e(m,{prop:"departmentId",label:"部门编号",width:r.value,align:"center"},null,8,["width"]),e(m,{prop:"roleId",label:"角色编号",width:r.value,align:"center"},null,8,["width"]),e(m,{prop:"statusId",label:"状态",width:r.value,align:"center"},{default:a(c=>[e(n,{size:"small",type:c.row.statusId?"success":"danger",plain:""},{default:a(()=>[h(x(c.row.statusId?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1},8,["width"]),e(m,{prop:"create_time",label:"创建时间",width:r.value,align:"center"},{default:a(c=>[h(x(i(q)(c.row.create_time)),1)]),_:1},8,["width"]),e(m,{prop:"update_time",label:"更新时间",width:r.value,align:"center"},{default:a(c=>[h(x(i(q)(c.row.update_time)),1)]),_:1},8,["width"]),e(m,{align:"center"},{header:a(()=>s[4]||(s[4]=[V("span",null,"操作",-1)])),default:a(c=>[e(n,{size:"small",type:"primary",text:"",icon:"Edit",onClick:A=>D(c.row)},{default:a(()=>s[5]||(s[5]=[h(" 编辑 ")])),_:2},1032,["onClick"]),e(n,{size:"small",type:"danger",text:"",icon:"Delete",onClick:A=>k(c.row.id)},{default:a(()=>s[6]||(s[6]=[h(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):ee("",!0)]),V("div",de,[e(P,{"current-page":o.value,"onUpdate:currentPage":s[0]||(s[0]=c=>o.value=c),"page-size":l.value,"onUpdate:pageSize":s[1]||(s[1]=c=>l.value=c),"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:($=t.value)==null?void 0:$.total,onSizeChange:b.value,onCurrentChange:C.value},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}}}),ie=R(ue,[["__scopeId","data-v-602edee4"]]),pe={class:"system-user-model"},me={class:"system-user-model-form"},ce={class:"system-user-model-dialog-footer"},_e=U({__name:"user-model",setup(S,{expose:y}){const w=g(),u=g(!1);let t=L({username:"",realName:"",password:"",phone:"",department_id:"",role:""});const r=()=>{u.value=!u.value,t={username:"",realName:"",password:"",phone:"",department_id:"",role:""}},b=()=>{r()};return y({changeDialogVisible:r,changeFormData:o=>{r();const l=o;t.username=l.name,t.realName=l.realName,t.role=l.roleId,t.department_id=l.departmentId}}),(o,l)=>{const _=Y,d=M,f=H,k=B,D=F,p=I,s=X;return z(),E("div",pe,[e(s,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=n=>u.value=n),title:"新建用户",width:"30%",center:""},{footer:a(()=>[V("div",ce,[e(p,{type:"primary",onClick:b},{default:a(()=>l[7]||(l[7]=[h("确定")])),_:1}),e(p,{onClick:r},{default:a(()=>l[8]||(l[8]=[h("取消")])),_:1})])]),default:a(()=>[V("div",me,[e(D,{"label-width":"80px",model:i(t),size:"large",ref_key:"formRef",ref:w},{default:a(()=>[e(d,{prop:"username",label:"用户名"},{default:a(()=>[e(_,{modelValue:i(t).username,"onUpdate:modelValue":l[0]||(l[0]=n=>i(t).username=n),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(d,{prop:"realName",label:"真实姓名"},{default:a(()=>[e(_,{modelValue:i(t).realName,"onUpdate:modelValue":l[1]||(l[1]=n=>i(t).realName=n),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),e(d,{prop:"password",label:"密码"},{default:a(()=>[e(_,{modelValue:i(t).password,"onUpdate:modelValue":l[2]||(l[2]=n=>i(t).password=n),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),e(d,{prop:"phone",label:"手机号"},{default:a(()=>[e(_,{modelValue:i(t).phone,"onUpdate:modelValue":l[3]||(l[3]=n=>i(t).phone=n),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(d,{prop:"department_id",label:"部门编号"},{default:a(()=>[e(_,{modelValue:i(t).department_id,"onUpdate:modelValue":l[4]||(l[4]=n=>i(t).department_id=n),placeholder:"请输入部门编号"},null,8,["modelValue"])]),_:1}),e(d,{prop:"role",label:"角色"},{default:a(()=>[e(k,{modelValue:i(t).role,"onUpdate:modelValue":l[5]||(l[5]=n=>i(t).role=n),placeholder:"请选择角色"},{default:a(()=>[e(f,{label:"测试用户",value:"测试用户"}),e(f,{label:"普通用户",value:"普通用户"}),e(f,{label:"管理员",value:"管理员"}),e(f,{label:"超级管理员",value:"超级管理员"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}}}),fe=R(_e,[["__scopeId","data-v-28b8c3e6"]]),ge={class:"system-user"},ve=U({__name:"user",setup(S){const y=g(),w=g(),u=g(),t=o=>{var l;(l=y.value)==null||l.fetchUserListRequest(o)},r=()=>{var o;(o=y.value)==null||o.fetchUserListRequest({})},b=()=>{var o;(o=u.value)==null||o.changeDialogVisible()},C=o=>{var l;(l=u.value)==null||l.changeFormData(o)};return T(()=>{var o;t((o=w.value)==null?void 0:o.searchForm)}),(o,l)=>(z(),E("div",ge,[e(oe,{onQueryClick:t,onResetClick:r,ref_key:"userSearchRef",ref:w},null,512),e(ie,{ref_key:"userContentRef",ref:y,onShowDialog:b,onEditData:C},null,512),e(fe,{ref_key:"userModelRef",ref:u},null,512)]))}}),De=R(ve,[["__scopeId","data-v-d7294e5a"]]);export{De as default};
